<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<BorderPane xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controllers.Admin.GroupManagementController"
            style="-fx-background-color: #121212;">

    <top>
        <HBox alignment="CENTER" spacing="20"
              style="-fx-background-color: rgba(30,30,30,0.9);
                     -fx-background-radius: 0 0 15 15;
                     -fx-border-color: #9c4dff;
                     -fx-border-width: 0 0 2 0;
                     -fx-padding: 15;">
            <Label text="Управление группами клиентов"
                   style="-fx-font-size: 24px;
                          -fx-font-weight: bold;
                          -fx-text-fill: #9c4dff;
                          -fx-effect: dropshadow(three-pass-box, rgba(156,77,255,0.8), 0, 0, 0, 8);"/>
        </HBox>
    </top>

    <center>
        <VBox spacing="15" alignment="CENTER" style="-fx-padding: 20;">
            <TableView fx:id="groupsTable" style="
                -fx-background-color: #1a1a1a;
                -fx-table-cell-border-color: transparent;
                -fx-selection-bar: #9c4dff;
                -fx-selection-bar-non-focused: #9c4dff;
            ">
                <columns>
                    <TableColumn fx:id="idColumn" text="ID" prefWidth="50"
                                 style="-fx-text-fill: #9c4dff; -fx-alignment: CENTER;">
                        <cellValueFactory><PropertyValueFactory property="groupId"/></cellValueFactory>
                    </TableColumn>
                    <TableColumn fx:id="nameColumn" text="Название" prefWidth="200"
                                 style="-fx-text-fill: #9c4dff;">
                        <cellValueFactory><PropertyValueFactory property="groupName"/></cellValueFactory>
                    </TableColumn>
                    <TableColumn fx:id="discountColumn" text="Скидка (%)" prefWidth="100"
                                 style="-fx-text-fill: #9c4dff; -fx-alignment: CENTER;">
                        <cellValueFactory><PropertyValueFactory property="discountPersent"/></cellValueFactory>
                    </TableColumn>
                </columns>
            </TableView>

            <HBox alignment="CENTER" spacing="15"
                  style="-fx-padding: 15;
                         -fx-background-color: rgba(30,30,30,0.7);
                         -fx-background-radius: 10;
                         -fx-border-color: #9c4dff;
                         -fx-border-width: 1;
                         -fx-border-radius: 10;">
                <Button fx:id="refreshButton" onAction="#handleRefresh" text="Обновить список"
                        style="-fx-background-color: linear-gradient(to bottom, #3a1c71, #9c4dff);
                               -fx-text-fill: white;
                               -fx-font-size: 14px;
                               -fx-font-weight: bold;
                               -fx-pref-width: 150;
                               -fx-pref-height: 35;
                               -fx-background-radius: 5;
                               -fx-cursor: hand;"/>

                <Button fx:id="addClientButton" onAction="#handleAddClient" text="Добавить клиента"
                        style="-fx-background-color: linear-gradient(to bottom, #3a1c71, #9c4dff);
                               -fx-text-fill: white;
                               -fx-font-size: 14px;
                               -fx-font-weight: bold;
                               -fx-pref-width: 150;
                               -fx-pref-height: 35;
                               -fx-background-radius: 5;
                               -fx-cursor: hand;"/>

                <Button fx:id="removeClientButton" onAction="#handleRemoveClient" text="Удалить клиента"
                        style="-fx-background-color: linear-gradient(to bottom, #3a1c71, #9c4dff);
                               -fx-text-fill: white;
                               -fx-font-size: 14px;
                               -fx-font-weight: bold;
                               -fx-pref-width: 150;
                               -fx-pref-height: 35;
                               -fx-background-radius: 5;
                               -fx-cursor: hand;"/>
            </HBox>

            <!-- Форма для добавления/удаления клиента -->
            <GridPane hgap="10" vgap="10" visible="false" fx:id="clientForm"
                      style="-fx-padding: 15;
                            -fx-background-color: rgba(30,30,30,0.7);
                            -fx-background-radius: 10;
                            -fx-border-color: #9c4dff;
                            -fx-border-width: 1;
                            -fx-border-radius: 10;">
                <Label text="ID клиента:" GridPane.rowIndex="0" GridPane.columnIndex="0"
                       style="-fx-text-fill: #e0e0e0;"/>
                <TextField fx:id="clientIdField" GridPane.rowIndex="0" GridPane.columnIndex="1"
                           style="-fx-background-color: #2b2b2b;
                                 -fx-text-fill: white;
                                 -fx-border-color: #9c4dff;
                                 -fx-border-width: 1;
                                 -fx-border-radius: 5;
                                 -fx-background-radius: 5;
                                 -fx-pref-width: 200;"/>

                <Label text="ID группы:" GridPane.rowIndex="1" GridPane.columnIndex="0"
                       style="-fx-text-fill: #e0e0e0;"/>
                <TextField fx:id="groupIdField" GridPane.rowIndex="1" GridPane.columnIndex="1"
                           style="-fx-background-color: #2b2b2b;
                                 -fx-text-fill: white;
                                 -fx-border-color: #9c4dff;
                                 -fx-border-width: 1;
                                 -fx-border-radius: 5;
                                 -fx-background-radius: 5;
                                 -fx-pref-width: 200;"/>

                <HBox spacing="15" GridPane.rowIndex="2" GridPane.columnSpan="2" alignment="CENTER">
                    <Button text="Подтвердить" fx:id="confirmButton"
                            style="-fx-background-color: linear-gradient(to bottom, #3a1c71, #9c4dff);
                                   -fx-text-fill: white;
                                   -fx-font-size: 14px;
                                   -fx-font-weight: bold;
                                   -fx-pref-width: 120;
                                   -fx-pref-height: 35;
                                   -fx-background-radius: 5;
                                   -fx-cursor: hand;"/>

                    <Button text="Отмена" fx:id="cancelButton" onAction="#handleCancel"
                            style="-fx-background-color: transparent;
                                   -fx-text-fill: #9c4dff;
                                   -fx-border-color: #9c4dff;
                                   -fx-border-width: 2;
                                   -fx-border-radius: 5;
                                   -fx-background-radius: 5;
                                   -fx-font-size: 14px;
                                   -fx-font-weight: bold;
                                   -fx-pref-width: 100;
                                   -fx-pref-height: 35;
                                   -fx-cursor: hand;"/>
                </HBox>
            </GridPane>
        </VBox>
    </center>

    <bottom>
        <HBox alignment="CENTER" spacing="15"
              style="-fx-padding: 15;
                     -fx-background-color: rgba(30,30,30,0.7);
                     -fx-background-radius: 15 15 0 0;">
            <Button fx:id="backButton" onAction="#handleBack"
                    style="-fx-background-color: transparent;
                           -fx-text-fill: #9c4dff;
                           -fx-border-color: #9c4dff;
                           -fx-border-width: 2;
                           -fx-border-radius: 10;
                           -fx-background-radius: 10;
                           -fx-font-size: 14px;
                           -fx-font-weight: bold;
                           -fx-pref-width: 100;
                           -fx-cursor: hand;"
                    text="Назад"/>

            <Label fx:id="statusLabel"
                   style="-fx-text-fill: #9c4dff;
                          -fx-font-size: 14px;
                          -fx-font-weight: bold;"/>
        </HBox>
    </bottom>
</BorderPane>